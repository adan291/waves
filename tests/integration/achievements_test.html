<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achievements Test - Whispers of the Wave</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            padding: 2rem;
        }

        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .test-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .test-header h1 {
            color: #80deea;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .test-section {
            background: rgba(10, 75, 94, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(128, 222, 234, 0.3);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .test-section h2 {
            color: #7dd3c0;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .test-btn {
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #4fc3f7, #7dd3c0);
            border: none;
            border-radius: 15px;
            color: #0a1128;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(79, 195, 247, 0.4);
        }

        .test-btn.secondary {
            background: rgba(79, 195, 247, 0.2);
            border: 2px solid rgba(79, 195, 247, 0.4);
            color: #4fc3f7;
        }

        .test-btn.secondary:hover {
            background: rgba(79, 195, 247, 0.3);
            border-color: #4fc3f7;
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .stat-card {
            background: rgba(10, 75, 94, 0.4);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(128, 222, 234, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #7dd3c0;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #b3e5fc;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .achievement-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(10, 75, 94, 0.4);
            border-radius: 12px;
            border: 1px solid rgba(128, 222, 234, 0.3);
        }

        .achievement-item.unlocked {
            border-color: rgba(125, 211, 192, 0.5);
            background: rgba(125, 211, 192, 0.1);
        }

        .achievement-item-icon {
            font-size: 2rem;
        }

        .achievement-item-info {
            flex: 1;
        }

        .achievement-item-name {
            color: #e0f7fa;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .achievement-item-desc {
            color: #b3e5fc;
            font-size: 0.85rem;
        }

        .achievement-item-rarity {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Ocean background -->
    <div class="ocean-background"></div>

    <div class="test-container">
        <div class="test-header">
            <h1>üèÜ Achievement System Test</h1>
            <p style="color: #b3e5fc; font-size: 1.1rem;">Prueba el sistema de logros</p>
        </div>

        <!-- Stats Section -->
        <div class="test-section">
            <h2>üìä Estad√≠sticas</h2>
            <div class="stats-display" id="statsDisplay"></div>
        </div>

        <!-- Quick Actions -->
        <div class="test-section">
            <h2>‚ö° Acciones R√°pidas</h2>
            <div class="test-grid">
                <button class="test-btn" onclick="showGallery()">üèÜ Ver Galer√≠a</button>
                <button class="test-btn" onclick="unlockRandom()">üé≤ Desbloquear Aleatorio</button>
                <button class="test-btn" onclick="unlockAll()">‚ú® Desbloquear Todos</button>
                <button class="test-btn secondary" onclick="resetAchievements()">üîÑ Reset</button>
            </div>
        </div>

        <!-- Simulate Progress -->
        <div class="test-section">
            <h2>üéÆ Simular Progreso</h2>
            <div class="test-grid">
                <button class="test-btn secondary" onclick="simulateFirstSteps()">üë£ Primeros Pasos</button>
                <button class="test-btn secondary" onclick="simulateExpression()">üíé Expresi√≥n Clara</button>
                <button class="test-btn secondary" onclick="simulateOceanJourney()">üåä Viaje Oce√°nico</button>
                <button class="test-btn secondary" onclick="simulateProgress()">üìà Progreso</button>
                <button class="test-btn secondary" onclick="simulateConsistency()">üí™ Consistencia</button>
                <button class="test-btn secondary" onclick="simulateLegendary()">üåü Legendario</button>
            </div>
        </div>

        <!-- Achievement List -->
        <div class="test-section">
            <h2>üìã Lista de Logros</h2>
            <div class="achievement-list" id="achievementList"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/engine/achievementSystem.js"></script>
    <script src="../js/ui/achievementUI.js"></script>

    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateDisplay();
        });

        // Listen for achievement unlocks
        document.addEventListener('achievement:unlocked', () => {
            updateDisplay();
        });

        // Update display
        function updateDisplay() {
            updateStats();
            updateAchievementList();
        }

        // Update stats
        function updateStats() {
            const stats = AchievementSystem.getStatistics();
            const container = document.getElementById('statsDisplay');
            
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${stats.unlocked}</div>
                    <div class="stat-label">Desbloqueados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.locked}</div>
                    <div class="stat-label">Bloqueados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.percentage}%</div>
                    <div class="stat-label">Completado</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.total}</div>
                    <div class="stat-label">Total</div>
                </div>
            `;
        }

        // Update achievement list
        function updateAchievementList() {
            const container = document.getElementById('achievementList');
            const achievements = AchievementSystem.getAllAchievements();
            
            container.innerHTML = achievements.map(achievement => {
                const isUnlocked = AchievementSystem.isUnlocked(achievement.id);
                const rarityColor = AchievementSystem.getRarityColor(achievement.rarity);
                
                return `
                    <div class="achievement-item ${isUnlocked ? 'unlocked' : ''}">
                        <div class="achievement-item-icon">${isUnlocked ? achievement.icon : 'üîí'}</div>
                        <div class="achievement-item-info">
                            <div class="achievement-item-name">${isUnlocked ? achievement.name : '???'}</div>
                            <div class="achievement-item-desc">${isUnlocked ? achievement.description : 'Logro bloqueado'}</div>
                        </div>
                        <div class="achievement-item-rarity" style="background: ${rarityColor}20; color: ${rarityColor}; border: 1px solid ${rarityColor}">
                            ${achievement.rarity}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Show gallery
        function showGallery() {
            AchievementUI.showGallery();
        }

        // Unlock random achievement
        function unlockRandom() {
            const locked = AchievementSystem.getLockedAchievements();
            if (locked.length === 0) {
                alert('¬°Todos los logros ya est√°n desbloqueados!');
                return;
            }
            
            const random = locked[Math.floor(Math.random() * locked.length)];
            AchievementSystem.unlock(random.id);
        }

        // Unlock all
        function unlockAll() {
            if (!confirm('¬øDesbloquear todos los logros?')) return;
            
            AchievementSystem.getAllAchievements().forEach(achievement => {
                AchievementSystem.unlock(achievement.id);
            });
        }

        // Reset
        function resetAchievements() {
            if (!confirm('¬øResetear todos los logros?')) return;
            
            AchievementSystem.reset();
            updateDisplay();
        }

        // Simulate first steps
        function simulateFirstSteps() {
            const stats = {
                totalMessages: 5,
                maxClarity: 50,
                maxSpecificity: 40,
                maxEmotionalAwareness: 45,
                maxOverall: 48,
                averageOverall: 45,
                improvement: 10,
                currentLevel: 2,
                statesReached: ['neutral', 'processing'],
                selectedWave: 'calm'
            };
            
            AchievementSystem.check(stats);
        }

        // Simulate expression achievements
        function simulateExpression() {
            const stats = {
                totalMessages: 10,
                maxClarity: 85,
                maxSpecificity: 75,
                maxEmotionalAwareness: 90,
                maxOverall: 92,
                averageOverall: 75,
                improvement: 25,
                currentLevel: 4,
                statesReached: ['neutral', 'processing', 'clarity'],
                selectedWave: 'calm'
            };
            
            AchievementSystem.check(stats);
        }

        // Simulate ocean journey
        function simulateOceanJourney() {
            const stats = {
                totalMessages: 15,
                maxClarity: 70,
                maxSpecificity: 65,
                maxEmotionalAwareness: 75,
                maxOverall: 70,
                averageOverall: 65,
                improvement: 30,
                currentLevel: 3,
                statesReached: ['confused', 'anxious', 'processing', 'clarity', 'resolved'],
                selectedWave: 'deep'
            };
            
            AchievementSystem.check(stats);
        }

        // Simulate progress
        function simulateProgress() {
            const stats = {
                totalMessages: 20,
                maxClarity: 75,
                maxSpecificity: 70,
                maxEmotionalAwareness: 80,
                maxOverall: 75,
                averageOverall: 70,
                improvement: 45,
                currentLevel: 4,
                statesReached: ['confused', 'processing', 'clarity', 'resolved'],
                selectedWave: 'energetic'
            };
            
            AchievementSystem.check(stats);
        }

        // Simulate consistency
        function simulateConsistency() {
            const stats = {
                totalMessages: 55,
                maxClarity: 80,
                maxSpecificity: 75,
                maxEmotionalAwareness: 85,
                maxOverall: 80,
                averageOverall: 75,
                improvement: 35,
                currentLevel: 4,
                statesReached: ['neutral', 'processing', 'clarity', 'resolved'],
                selectedWave: 'calm'
            };
            
            AchievementSystem.check(stats);
        }

        // Simulate legendary
        function simulateLegendary() {
            const stats = {
                totalMessages: 60,
                maxClarity: 95,
                maxSpecificity: 90,
                maxEmotionalAwareness: 95,
                maxOverall: 95,
                averageOverall: 85,
                improvement: 50,
                currentLevel: 5,
                statesReached: ['confused', 'anxious', 'processing', 'clarity', 'resolved'],
                selectedWave: 'healing'
            };
            
            AchievementSystem.check(stats);
        }
    </script>
</body>
</html>
